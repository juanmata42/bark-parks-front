import './header.scss';
import React, { useState, useEffect } from 'react';
import { NavLink, useLocation } from 'react-router-dom';
import SubHeader from './subheader';
import { useSelector } from 'react-redux';

const Header = (): JSX.Element => {
  let location = useLocation();
  const state=useSelector((state: any) => state);
  const [user, setUser] = useState(
    JSON.parse(localStorage.getItem('user') || '{}')
  );
  useEffect(() => {
    const token = user?.data?.token;
    setUser(JSON.parse(localStorage.getItem('user') || '{}'));
  }, [location, state]);
  return (
    <header className="main-header">
      <nav className="main-header__nav">
        <ul className="main-header__nav-list">
          {user.data && (
            <>
              <li className="main-header__nav-item" key="kennel">
                <NavLink
                  className="main-header__link filter-dark "
                  to="/kennel"
                >
                  <svg
                    className="header-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 479.997 479.997"
                  >
                    <path d="M303.882 387.949c-27.451 9.424-46.143-9.094-53.929-19.218a10.009 10.009 0 00-.323-3.751c24.072-4.618 41.152-24.895 41.152-50.742 0-5.522-4.477-10-10-10H197.3c-5.523 0-10 4.478-10 10 0 25.542 16.693 45.634 40.329 50.563a10.01 10.01 0 00-.387 3.861c-2.649 3.418-6.557 7.825-11.601 11.791-12.939 10.173-27.175 12.695-42.316 7.496-5.224-1.793-10.912.988-12.706 6.211-1.793 5.223.987 10.911 6.21 12.705 7.28 2.5 14.501 3.742 21.58 3.742 13.984 0 27.405-4.85 39.592-14.432 4.137-3.252 7.675-6.711 10.598-9.949 2.923 3.238 6.462 6.697 10.599 9.949 12.189 9.582 25.609 14.432 39.596 14.432 7.078 0 14.302-1.243 21.582-3.742 5.224-1.793 8.004-7.482 6.211-12.705-1.793-5.223-7.479-8.004-12.705-6.211zm-64.825-41.975c-15.142.001-26.586-8.557-30.391-21.736h60.752c-3.801 13.179-15.234 21.736-30.361 21.736z" />
                    <path d="M478.38 363.171c-1.693-72.82-10.413-132.147-25.919-176.353-12.458-35.516-29.325-61.5-50.131-77.233-25.665-19.407-49.427-17.151-56.3-15.953a149.671 149.671 0 00-41.207-31.518l4.372-9.478a10.001 10.001 0 00-10.807-14.038l-50.581 8.866 3.397-6.79a9.998 9.998 0 00-13.485-13.383l-71.33 36.37c-.194.1-.385.205-.573.316l-9.584 5.705c-.13.077-.258.157-.384.24a150.064 150.064 0 00-27.342 23.082c-10.284-.661-29.928.768-50.837 16.579-20.806 15.733-37.673 41.719-50.131 77.233C12.031 231.024 3.31 290.352 1.619 363.172 1.242 365.717.05 374.513.002 384.339c-.086 17.718 3.523 29.321 11.034 35.475 2.385 1.953 6.695 4.514 12.9 4.514 2.808 0 6.004-.524 9.584-1.866 21.319-8.008 37.861-51.678 40.96-60.351a10.03 10.03 0 00.512-2.168l1.535-12.722c8.471 21.211 21.348 40.695 38.185 57.338 32.125 31.752 74.601 49.238 119.605 49.238 44.99 0 87.445-17.487 119.543-49.241 21.798-21.564 36.957-47.899 44.487-76.587l6.796 32.805c.094.454.219.9.375 1.337 3.099 8.673 19.641 52.343 40.966 60.354 3.578 1.341 6.771 1.864 9.577 1.864 6.204 0 10.516-2.561 12.901-4.515 7.511-6.153 11.12-17.757 11.034-35.475-.046-9.827-1.238-18.624-1.616-21.168zM64.801 277.418l-9.529 78.998c-7.509 20.554-20.476 44.201-28.778 47.319-1.585.595-2.424.621-2.679.621-.055 0-.082-.002-.084.002-.151-.127-3.669-3.391-3.73-19.012-.04-10.166 1.458-19.615 1.472-19.703.073-.453.115-.912.126-1.371 3.545-156.517 38.651-215.941 67.476-238.231 8.327-6.439 16.229-9.839 22.887-11.57-13.998 22.184-21.703 47.848-21.703 74.451v3.012c-20.448 26.629-24.838 57.535-25.458 85.484zm319.01 4.447l-.003 3.653c0 81.761-67.061 148.278-149.491 148.278-82.491 0-149.603-66.518-149.603-148.278 0-2.213.021-4.455.065-6.715l4.377-36.29c.083-.69.093-1.372.038-2.039 3.343-13.607 9.072-26.879 18.791-38.704a10.006 10.006 0 002.274-6.35v-6.499c0-40.651 21.081-78.829 56.401-102.171l9.104-5.419 44.434-22.657a9.998 9.998 0 001.765 8.041 9.995 9.995 0 009.746 3.876l51.329-8.998-2.523 5.472a10.001 10.001 0 0014.587 12.538c42.343 21.748 68.642 63.624 68.642 109.319v17.505c0 2.476.918 4.863 2.577 6.7 6.542 7.247 10.639 14.964 13.208 23.161.014.596.074 1.197.199 1.801l3.173 15.317c.936 8.98.924 18.461.91 28.459zm72.535 122.46c-.008.003-.814.171-2.835-.587-8.362-3.141-21.443-27.074-28.928-47.716l-21.95-105.945c-1.863-16.388-6.645-32.49-18.891-47.363v-13.792c0-26.627-7.732-52.715-22.362-75.442-.068-.105-.141-.208-.209-.313 7.705.928 18.328 4.039 29.753 12.874 28.825 22.291 63.93 81.716 67.476 238.232.011.459.053.918.126 1.372.015.092 1.49 9.321 1.473 19.478-.028 16.045-3.685 19.202-3.653 19.202z" />
                    <path d="M166.583 227.972c12.199.371 24.029 7.659 35.162 21.663a9.982 9.982 0 007.834 3.777c2.181 0 4.377-.71 6.217-2.172 4.323-3.438 5.042-9.729 1.605-14.051-15.021-18.895-31.982-28.724-50.41-29.214-28.87-.784-49.68 22.314-50.55 23.296-3.652 4.124-3.27 10.409.84 14.077 4.11 3.667 10.424 3.308 14.107-.788.153-.171 15.671-17.143 35.195-16.588zM299.595 207.976c-28.902-.789-49.672 22.315-50.543 23.297-3.662 4.135-3.278 10.455.856 14.116 4.136 3.662 10.456 3.278 14.116-.856.151-.171 15.676-17.096 35.04-16.563 12.245.324 24.118 7.614 35.292 21.667a9.977 9.977 0 007.833 3.776c2.181 0 4.378-.71 6.217-2.173 4.323-3.436 5.041-9.727 1.604-14.051-15.023-18.896-31.987-28.724-50.415-29.213z" />
                  </svg>
                  Kennel
                </NavLink>
              </li>
              <li className="main-header__nav-item" key="social">
                <NavLink
                  className={() =>
                    'main-header__link ' +
                    (location.pathname === '/friends' ||
                    location.pathname === '/groups'
                      ? ' active'
                      : ' filter-dark')
                  }
                  to="/friends"
                >
                  <svg
                    className="header-icon"
                    width="13.556726mm"
                    height="9.504385mm"
                    viewBox="0 0 13.556726 9.504385"
                    version="1.1"
                    id="svg856"
                  >
                    <defs id="defs853" />
                    <g id="layer1" transform="translate(-116.89906,-69.715549)">
                      <rect
                        x="126.78072"
                        y="75.684303"
                        width="3.6750627"
                        height="0.73474789"
                        id="rect4"
                      />
                      <rect
                        x="72.459839"
                        y="126.98914"
                        transform="rotate(-29.854323)"
                        width="3.6750884"
                        height="0.73475307"
                        id="rect6"
                      />
                      <rect
                        x="-1.335333"
                        y="144.47745"
                        transform="rotate(-60.225271)"
                        width="3.6748631"
                        height="0.73502558"
                        id="rect8"
                      />
                      <path
                        d="m 122.73868,76.419054 1.47029,-2.572279 -1.8378,-2.939785 -3.33295,3.725333 -1.8116,-0.418041 0.4773,1.909498 -0.80486,0.899583 5.15647,2.196571 2.52042,-2.80088 z M 120.71753,75.3168 c -0.30427,0 -0.55139,-0.246591 -0.55139,-0.551127 0,-0.304535 0.24712,-0.551127 0.55139,-0.551127 0.30427,0 0.55113,0.246592 0.55113,0.551127 0,0.304271 -0.2466,0.551127 -0.55113,0.551127 z"
                        id="path10"
                      />
                    </g>
                  </svg>
                  Social
                </NavLink>
              </li>
            </>
          )}
          <li className="main-header__nav-item" key="bark-parks">
            <NavLink
              className="main-header__link filter-dark "
              to="/bark-parks"
            >
              <svg
                className="header-icon"
                width={59.922}
                height={37.212}
                viewBox="0 0 15.854 9.846"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M.005 7.205h.811c0 .39.063.704.187.946.124.24.296.416.516.527.22.113.472.17.755.17.258 0 .501-.057.728-.17.228-.11.41-.286.548-.527.141-.242.212-.557.212-.946h.811c0 .568-.093 1.049-.289 1.442-.196.392-.469.69-.817.894a2.285 2.285 0 01-1.183.305c-.482 0-.894-.102-1.235-.305a1.949 1.949 0 01-.78-.894C.093 8.254.005 7.773.005 7.205z" />
                <path d="M3.762 7.205h.811c0 .39.062.704.186.946.124.24.297.416.517.527.22.113.472.17.755.17.258 0 .5-.057.728-.17.228-.11.41-.286.548-.527.141-.242.212-.557.212-.946h.811c0 .568-.093 1.049-.29 1.442-.196.392-.468.69-.816.894a2.285 2.285 0 01-1.183.305c-.482 0-.894-.102-1.235-.305a1.949 1.949 0 01-.78-.894c-.176-.393-.264-.874-.264-1.442z" />
                <path d="M7.513 7.205h.817c0 .39.062.704.186.946.124.24.297.416.517.527.22.113.472.17.754.17.259 0 .502-.057.73-.17.227-.11.41-.286.547-.527.141-.242.212-.557.212-.946h.816c0 .568-.098 1.049-.294 1.442-.197.392-.469.69-.817.894a2.285 2.285 0 01-1.183.305c-.482 0-.894-.102-1.235-.305a1.949 1.949 0 01-.78-.894c-.176-.393-.27-.874-.27-1.442z" />
                <path d="M3.762 7.205v-2.01h.811v2.01M7.52 5.427l-3.757.002V4.43l4.573-.001-.009.992" />
                <path d="M7.519 5.427v-.232h.811m2.946 2.01V5.427H7.519v-.996l4.573-.001v2.775" />
                <path d="M11.28 7.205h.812c0 .39.062.704.186.946.124.24.297.416.517.527.22.113.472.17.755.17.258 0 .5-.057.728-.17.228-.11.41-.286.548-.527.141-.242.212-.557.212-.946h.816c0 .568-.098 1.049-.294 1.442-.197.392-.469.69-.817.894a2.285 2.285 0 01-1.183.305c-.482 0-.894-.102-1.235-.305a1.949 1.949 0 01-.78-.894c-.176-.393-.264-.874-.264-1.442zM8.33 5.427v1.778h-.816V5.427zM.816 5.427v1.778H0V5.427zM15.854 5.427v1.778h-.816V5.427z" />
                <g>
                  <path
                    d="M13.513 5.073h-1.608v-.65h1.608c.312 0 .564-.049.757-.148a.929.929 0 00.422-.413c.09-.177.136-.378.136-.604 0-.207-.045-.4-.136-.583a1.008 1.008 0 00-.422-.438c-.193-.113-.445-.17-.757-.17h-1.422l.001 3.006h-.798V1.414h2.22c.454 0 .839.079 1.153.236.314.157.552.375.715.653.163.276.244.591.244.947 0 .386-.081.715-.244.988-.163.273-.401.48-.715.624-.314.14-.699.21-1.154.21z"
                    color="#000"
                    aria-label="P"
                    fontSize={10.583}
                    fontFamily="Roboto"
                    strokeWidth={0.265}
                  />
                </g>
                <path
                  d="M12.758.845v.644h-.26V.845a.663.663 0 00-.06-.302.371.371 0 00-.164-.169.52.52 0 00-.242-.054.514.514 0 00-.233.054.403.403 0 00-.175.169.594.594 0 00-.068.302v.57l1.202-.001v.319h-1.463V.845c0-.181.031-.335.094-.46a.666.666 0 01.261-.287A.731.731 0 0112.03 0c.154 0 .286.033.395.098.11.065.192.16.25.286.056.126.084.28.084.461z"
                  aria-label="P"
                  fontSize={10.583}
                  fontFamily="Roboto"
                  strokeWidth={0.265}
                />
                <path
                  d="M13.96.845v.643h-.26V.845a.663.663 0 00-.059-.303.371.371 0 00-.165-.168.52.52 0 00-.242-.055.514.514 0 00-.233.055.403.403 0 00-.175.168.594.594 0 00-.068.303v.569h1.202v.319h-1.463V.845c0-.182.031-.336.094-.461a.666.666 0 01.261-.286.731.731 0 01.379-.098c.154 0 .286.033.395.098.11.065.193.16.25.286.056.125.084.28.084.461z"
                  aria-label="P"
                  fontSize={10.583}
                  fontFamily="Roboto"
                  strokeWidth={0.265}
                />
                <path
                  d="M1.771 2.136L3.657 4.07l-.305.306L1.417 2.49zm2.125 2.856q-.082-.082-.09-.188-.005-.108.094-.207.097-.096.204-.09.11.003.192.085.079.079.082.188.006.108-.09.205-.1.098-.207.093-.106-.007-.185-.086z"
                  aria-label="!"
                  fontSize={5.292}
                  fontFamily="Roboto"
                  strokeWidth={0.132}
                />
              </svg>
              Bark Parks
            </NavLink>
          </li>
          <li className="main-header__nav-item" key="local-shelters">
            <NavLink
              className="main-header__link filter-dark "
              to="/local-shelters"
            >
              <svg
                className="header-icon"
                xmlns="http://www.w3.org/2000/svg"
                width="60"
                height="100"
                viewBox="0 0 240 240"
              >
                <path d="M91.65 0C58.487.096 41.433 39.85 64.031 63.96c.09.105.18.206.276.306l11.138 11.578-71.906 44.73a7.5 7.5 0 007.922 12.737l12.797-7.961v99.091a7.5 7.5 0 007.5 7.5h67.978a7.5 7.5 0 007.5-7.5v-52.26h30.037v52.26a7.5 7.5 0 007.5 7.5h67.977a7.5 7.5 0 007.5-7.5V125.35c13.856 8.62 13.969 9.093 16.752 9.093 7.507 0 10.372-9.888 3.97-13.869l-71.906-44.73 11.14-11.578c.096-.102.19-.205.28-.31C203.05 39.875 186.056.095 152.861 0c-12.594-.019-23.623 5.97-30.605 15.318C115.226 5.906 104.179 0 91.76 0h-.11zm.043 15h.067c12.712 0 22.998 10.287 22.998 22.996a7.5 7.5 0 007.5 7.5 7.5 7.5 0 007.5-7.5c0-12.713 10.286-22.996 22.996-22.996h.068c20.18.059 30.462 24.327 16.551 38.879-.077.08-.152.161-.225.244l-13.103 13.62-29.828-18.555a7.493 7.493 0 00-7.922 0L88.469 67.742 75.36 54.117a9.622 9.622 0 00-.216-.236C61.214 39.309 71.549 15.059 91.693 15zm30.563 49.39l23.156 14.405-17.81 18.514a7.408 7.408 0 01-10.688 0L99.102 78.793l23.154-14.402zM86.08 86.896l20.024 20.812c8.832 9.18 23.478 9.176 32.304.002l20.026-20.814 46.818 29.125v73.207h-52.977v-24.543a7.5 7.5 0 00-7.5-7.5H99.738a7.5 7.5 0 00-7.5 7.5v24.543H39.26V116.02l46.82-29.125zM39.26 204.227h52.978v12.714H39.26v-12.714zm113.015 0h52.977v12.714h-52.977v-12.714z" />
              </svg>
              Shelters
            </NavLink>
          </li>
          {user.data ? (
            <li className="main-header__nav-item" key="profile">
              <NavLink
                className={() =>
                  'main-header__link ' +
                  (location.pathname === '/profile-settings' ||
                  location.pathname === '/about' ||
                  location.pathname === '/logout'
                    ? ' active'
                    : ' filter-dark')
                }
                to="/profile-settings"
              >
                <svg
                  className="header-icon"
                  width="60"
                  height="100"
                  viewBox="60 150 424 600"
                  fillRule="evenodd"
                >
                  <g>
                    <path d="M143.548 388.221c22.737 50.44 15.792 102.75-15.51 116.87-31.303 14.12-75.11-15.31-97.845-65.74-22.737-50.43-15.793-102.745 15.51-116.863 31.303-14.114 75.108 15.317 97.845 65.733zM452.97 388.221c-22.738 50.44-15.793 102.75 15.512 116.87 31.303 14.12 75.106-15.31 97.846-65.74 22.734-50.43 15.789-102.745-15.513-116.863-31.301-14.114-75.108 15.317-97.845 65.733zM276.6 287.128c11.655 54.069-6.11 103.763-39.678 111.003-33.566 7.23-70.225-30.74-81.878-84.804-11.653-54.068 6.112-103.764 39.679-110.997 33.567-7.236 70.224 30.729 81.877 84.798zM319.082 287.174c-11.644 54.068 6.109 103.767 39.674 110.997 33.568 7.24 70.226-30.73 81.878-84.797 11.654-54.069-6.11-103.765-39.678-110.998-33.568-7.234-70.225 30.729-81.874 84.798zM234.587 467.871c-8.192 14.15-46.156 60.99-72.414 76.97-26.256 15.98-58.792 39.38-53.332 93.11 5.457 53.74 60.575 76.74 96.86 74.7 36.286-2.03 104.699-8.71 153.542-1.94 48.842 6.77 110.487 1.64 124.923-49.81 14.436-51.45-17.85-84.23-43.044-102.83-25.193-18.59-67.265-74.2-80.227-99.73-12.96-25.52-78.927-72.26-126.308 9.53z" />
                  </g>
                </svg>
                Profile
              </NavLink>
            </li>
          ) : (
            <li className="main-header__nav-item" key="profile">
              <NavLink
                className={() =>
                  'main-header__link ' +
                  (location.pathname === '/auth' ? ' active' : ' filter-dark')
                }
                to="/auth"
              >
                <svg
                  className="header-icon"
                  width="60"
                  height="100"
                  viewBox="60 150 424 600"
                  fillRule="evenodd"
                >
                  <g>
                    <path d="M143.548 388.221c22.737 50.44 15.792 102.75-15.51 116.87-31.303 14.12-75.11-15.31-97.845-65.74-22.737-50.43-15.793-102.745 15.51-116.863 31.303-14.114 75.108 15.317 97.845 65.733zM452.97 388.221c-22.738 50.44-15.793 102.75 15.512 116.87 31.303 14.12 75.106-15.31 97.846-65.74 22.734-50.43 15.789-102.745-15.513-116.863-31.301-14.114-75.108 15.317-97.845 65.733zM276.6 287.128c11.655 54.069-6.11 103.763-39.678 111.003-33.566 7.23-70.225-30.74-81.878-84.804-11.653-54.068 6.112-103.764 39.679-110.997 33.567-7.236 70.224 30.729 81.877 84.798zM319.082 287.174c-11.644 54.068 6.109 103.767 39.674 110.997 33.568 7.24 70.226-30.73 81.878-84.797 11.654-54.069-6.11-103.765-39.678-110.998-33.568-7.234-70.225 30.729-81.874 84.798zM234.587 467.871c-8.192 14.15-46.156 60.99-72.414 76.97-26.256 15.98-58.792 39.38-53.332 93.11 5.457 53.74 60.575 76.74 96.86 74.7 36.286-2.03 104.699-8.71 153.542-1.94 48.842 6.77 110.487 1.64 124.923-49.81 14.436-51.45-17.85-84.23-43.044-102.83-25.193-18.59-67.265-74.2-80.227-99.73-12.96-25.52-78.927-72.26-126.308 9.53z" />
                  </g>
                </svg>
                Log in
              </NavLink>
            </li>
          )}
        </ul>
      </nav>
      <SubHeader />
    </header>
  );
};
export default Header;
